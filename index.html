<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ - Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…ØªØ³Ø§Ø±Ø¹Ø©</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&amp;display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Tajawal', sans-serif; }
    .gradient-bg {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    }
    .card-glass {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
    }
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
    }
    .btn-success {
      background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    }
    .btn-danger {
      background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
    }
    .question-card {
      animation: fadeInUp 0.5s ease forwards;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .correct-answer { background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%); border: 2px solid #28a745; }
    .wrong-answer { background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%); border: 2px solid #dc3545; }
    .progress-bar {
      background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
      transition: width 0.5s ease;
    }
    .floating-shapes {
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 0;
    }
    .shape {
      position: absolute;
      opacity: 0.1;
      animation: float 15s infinite ease-in-out;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
    }
  </style>
  <style>body { box-sizing: border-box; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full gradient-bg overflow-auto">
  <div class="floating-shapes">
   <div class="shape" style="top: 10%; left: 10%; font-size: 80px;">
    âš›ï¸
   </div>
   <div class="shape" style="top: 20%; right: 15%; font-size: 60px; animation-delay: -5s;">
    ğŸš€
   </div>
   <div class="shape" style="bottom: 30%; left: 20%; font-size: 70px; animation-delay: -10s;">
    ğŸ“
   </div>
   <div class="shape" style="bottom: 20%; right: 10%; font-size: 50px; animation-delay: -7s;">
    âš¡
   </div>
  </div>
  <div id="app" class="relative z-10 min-h-full w-full p-4 md:p-8"><!-- Login Page -->
   <div id="login-page" class="flex items-center justify-center min-h-full">
    <div class="card-glass rounded-3xl shadow-2xl p-8 md:p-12 w-full max-w-md">
     <div class="text-center mb-8">
      <div class="text-6xl mb-4">
       ğŸ”¬
      </div>
      <h1 id="main-title" class="text-3xl font-bold text-gray-800 mb-2">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡</h1>
      <p class="text-gray-600">Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù„Ø«: Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…ØªØ³Ø§Ø±Ø¹Ø©</p>
     </div>
     <div class="space-y-4">
      <div><label class="block text-gray-700 font-medium mb-2">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label> <input type="text" id="student-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition">
      </div>
      <div><label class="block text-gray-700 font-medium mb-2">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label> <input type="password" id="student-password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition">
      </div>
      <div id="login-error" class="hidden text-red-500 text-sm text-center"></div><button onclick="handleStudentLogin()" class="btn-primary w-full text-white font-bold py-4 rounded-xl text-lg"> ğŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± </button>
      <div class="text-center pt-4 border-t border-gray-200 mt-4"><button onclick="showAdminLogin()" class="text-purple-600 hover:text-purple-800 font-medium"> ğŸ‘¨â€ğŸ’¼ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ± </button>
      </div>
     </div>
    </div>
   </div><!-- Admin Login Page -->
   <div id="admin-login-page" class="hidden flex items-center justify-center min-h-full">
    <div class="card-glass rounded-3xl shadow-2xl p-8 md:p-12 w-full max-w-md">
     <div class="text-center mb-8">
      <div class="text-6xl mb-4">
       ğŸ‘¨â€ğŸ’¼
      </div>
      <h1 class="text-3xl font-bold text-gray-800 mb-2">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±</h1>
      <p class="text-gray-600">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±</p>
     </div>
     <div class="space-y-4">
      <div><label class="block text-gray-700 font-medium mb-2">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label> <input type="text" id="admin-username" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition">
      </div>
      <div><label class="block text-gray-700 font-medium mb-2">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label> <input type="password" id="admin-password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition">
      </div>
      <div id="admin-login-error" class="hidden text-red-500 text-sm text-center"></div><button onclick="handleAdminLogin()" class="btn-primary w-full text-white font-bold py-4 rounded-xl text-lg"> ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ </button> <button onclick="backToStudentLogin()" class="w-full text-gray-600 hover:text-gray-800 font-medium py-2"> â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØµÙØ­Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ </button>
     </div>
    </div>
   </div><!-- Quiz Page -->
   <div id="quiz-page" class="hidden">
    <div class="max-w-3xl mx-auto"><!-- Header -->
     <div class="card-glass rounded-2xl p-4 mb-6 flex items-center justify-between">
      <div class="flex items-center gap-3">
       <div class="text-3xl">
        ğŸ‘¤
       </div>
       <div>
        <p class="text-gray-600 text-sm">Ø§Ù„Ø·Ø§Ù„Ø¨</p>
        <p id="display-name" class="font-bold text-gray-800"></p>
       </div>
      </div>
      <div class="flex items-center gap-4">
       <div class="text-center">
        <p class="text-gray-600 text-sm">Ø§Ù„Ø³Ø¤Ø§Ù„</p>
        <p class="font-bold text-purple-600"><span id="current-q">1</span>/25</p>
       </div>
       <div class="text-center">
        <p class="text-gray-600 text-sm">Ø§Ù„Ø¯Ø±Ø¬Ø©</p>
        <p class="font-bold text-green-600"><span id="score">0</span></p>
       </div>
      </div>
     </div><!-- Progress Bar -->
     <div class="card-glass rounded-full h-4 mb-6 overflow-hidden">
      <div id="progress" class="progress-bar h-full rounded-full" style="width: 4%"></div>
     </div><!-- Question Card -->
     <div id="question-container" class="card-glass rounded-3xl p-6 md:p-8 question-card"><!-- Question content will be inserted here -->
     </div>
    </div>
   </div><!-- Results Page -->
   <div id="results-page" class="hidden flex items-center justify-center min-h-full">
    <div class="card-glass rounded-3xl shadow-2xl p-8 md:p-12 w-full max-w-lg text-center">
     <div id="result-emoji" class="text-8xl mb-6">
      ğŸ‰
     </div>
     <h1 class="text-3xl font-bold text-gray-800 mb-4">Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±!</h1>
     <p id="result-name" class="text-xl text-gray-600 mb-6"></p>
     <div class="bg-gradient-to-r from-purple-100 to-pink-100 rounded-2xl p-6 mb-6">
      <p class="text-gray-600 mb-2">Ø¯Ø±Ø¬ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</p>
      <p class="text-5xl font-bold text-purple-600"><span id="final-score">0</span>/25</p>
      <p id="percentage" class="text-2xl text-gray-700 mt-2"></p>
     </div>
     <div id="result-message" class="text-lg text-gray-700 mb-6"></div><button onclick="restartQuiz()" class="btn-primary text-white font-bold py-4 px-8 rounded-xl text-lg"> ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± </button>
    </div>
   </div><!-- Admin Dashboard -->
   <div id="admin-page" class="hidden">
    <div class="max-w-4xl mx-auto">
     <div class="card-glass rounded-3xl shadow-2xl p-6 md:p-8">
      <div class="flex items-center justify-between mb-8">
       <div class="flex items-center gap-4">
        <div class="text-5xl">
         ğŸ‘¨â€ğŸ’¼
        </div>
        <div>
         <h1 class="text-2xl font-bold text-gray-800">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±</h1>
         <p class="text-gray-600">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</p>
        </div>
       </div><button onclick="logoutAdmin()" class="btn-danger text-white font-bold py-2 px-6 rounded-xl"> ğŸšª Ø®Ø±ÙˆØ¬ </button>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
       <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-2xl p-6 text-white">
        <p class="text-blue-100 text-sm">Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨</p>
        <p id="total-students" class="text-4xl font-bold">0</p>
       </div>
       <div class="bg-gradient-to-r from-green-500 to-green-600 rounded-2xl p-6 text-white">
        <p class="text-green-100 text-sm">Ø£Ø¹Ù„Ù‰ Ø¯Ø±Ø¬Ø©</p>
        <p id="highest-score" class="text-4xl font-bold">0</p>
       </div>
       <div class="bg-gradient-to-r from-purple-500 to-purple-600 rounded-2xl p-6 text-white">
        <p class="text-purple-100 text-sm">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¯Ø±Ø¬Ø§Øª</p>
        <p id="average-score" class="text-4xl font-bold">0</p>
       </div>
      </div>
      <h2 class="text-xl font-bold text-gray-800 mb-4">ğŸ“‹ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø·Ù„Ø§Ø¨</h2>
      <div id="students-list" class="space-y-3 max-h-96 overflow-y-auto">
       <div class="text-center text-gray-500 py-8">
        <div class="text-4xl mb-2">
         ğŸ“­
        </div>
        <p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø§Ø¨ Ø¨Ø¹Ø¯</p>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Configuration
    const defaultConfig = {
      quiz_title: 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ - Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…ØªØ³Ø§Ø±Ø¹Ø©',
      background_color: '#1a1a2e',
      primary_color: '#667eea',
      text_color: '#1f2937',
      surface_color: '#ffffff',
      accent_color: '#764ba2'
    };

    let config = { ...defaultConfig };
    let studentsData = [];
    let currentQuestion = 0;
    let score = 0;
    let currentStudentName = '';
    let startTime = null;

    // Questions Database - 25 Questions
    const questions = [
      // ØµØ­ ÙˆØºÙ„Ø· (10 Ø£Ø³Ø¦Ù„Ø©)
      {
        type: 'truefalse',
        question: 'Ø§Ù„ØªØ³Ø§Ø±Ø¹ Ù‡Ùˆ Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØºÙŠØ± ÙÙŠ Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù…ØªØ¬Ù‡Ø© Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù„Ø²Ù…Ù†',
        answer: true,
        explanation: 'ØµØ­ÙŠØ­! Ø§Ù„ØªØ³Ø§Ø±Ø¹ = Ø§Ù„ØªØºÙŠØ± ÙÙŠ Ø§Ù„Ø³Ø±Ø¹Ø© Ã· Ø§Ù„Ø²Ù…Ù†'
      },
      {
        type: 'truefalse',
        question: 'Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ø§Ù„ØªØ³Ø§Ø±Ø¹ Ù…ÙˆØ¬Ø¨Ø§Ù‹ ÙØ¥Ù† Ø§Ù„Ø¬Ø³Ù… ÙŠØªØ¨Ø§Ø·Ø£ Ø¯Ø§Ø¦Ù…Ø§Ù‹',
        answer: false,
        explanation: 'Ø®Ø·Ø£! Ø§Ù„ØªØ³Ø§Ø±Ø¹ Ø§Ù„Ù…ÙˆØ¬Ø¨ ÙŠØ¹Ù†ÙŠ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø³Ø±Ø¹Ø© ÙÙŠ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù…ÙˆØ¬Ø¨'
      },
      {
        type: 'truefalse',
        question: 'ØªØ³Ø§Ø±Ø¹ Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ© Ø§Ù„Ø£Ø±Ø¶ÙŠØ© Ø«Ø§Ø¨Øª ÙˆÙŠØ³Ø§ÙˆÙŠ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ 9.8 m/sÂ²',
        answer: true,
        explanation: 'ØµØ­ÙŠØ­! ÙˆÙ‡Ø°Ø§ Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„Ø³Ø·Ø­ Ø§Ù„Ø£Ø±Ø¶ÙŠ'
      },
      {
        type: 'truefalse',
        question: 'ÙÙŠ Ø§Ù„Ø³Ù‚ÙˆØ· Ø§Ù„Ø­Ø±ØŒ ØªØ²Ø¯Ø§Ø¯ Ø³Ø±Ø¹Ø© Ø§Ù„Ø¬Ø³Ù… Ø¨Ù…Ù‚Ø¯Ø§Ø± 9.8 m/s ÙƒÙ„ Ø«Ø§Ù†ÙŠØ©',
        answer: true,
        explanation: 'ØµØ­ÙŠØ­! Ù„Ø£Ù† ØªØ³Ø§Ø±Ø¹ Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ© = 9.8 m/sÂ²'
      },
      {
        type: 'truefalse',
        question: 'ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„ØªØ³Ø§Ø±Ø¹ ØµÙØ±Ø§Ù‹ Ø¨ÙŠÙ†Ù…Ø§ Ø§Ù„Ø³Ø±Ø¹Ø© Ù„ÙŠØ³Øª ØµÙØ±Ø§Ù‹',
        answer: true,
        explanation: 'ØµØ­ÙŠØ­! Ù…Ø«Ù„ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© Ø¨Ø³Ø±Ø¹Ø© Ø«Ø§Ø¨ØªØ©'
      },
      {
        type: 'truefalse',
        question: 'Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© ØªØ³Ø§ÙˆÙŠ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù„Ø­Ø¸ÙŠØ©',
        answer: false,
        explanation: 'Ø®Ø·Ø£! ØªØªØ³Ø§ÙˆÙ‰ ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ù†ØªØ¸Ù…Ø©'
      },
      {
        type: 'truefalse',
        question: 'Ø§Ù„Ù…Ø³Ø§Ø­Ø© ØªØ­Øª Ù…Ù†Ø­Ù†Ù‰ (Ø§Ù„Ø³Ø±Ø¹Ø©-Ø§Ù„Ø²Ù…Ù†) ØªÙ…Ø«Ù„ Ø§Ù„Ø¥Ø²Ø§Ø­Ø©',
        answer: true,
        explanation: 'ØµØ­ÙŠØ­! Ø§Ù„Ù…Ø³Ø§Ø­Ø© = Ø§Ù„Ø³Ø±Ø¹Ø© Ã— Ø§Ù„Ø²Ù…Ù† = Ø§Ù„Ø¥Ø²Ø§Ø­Ø©'
      },
      {
        type: 'truefalse',
        question: 'Ù…ÙŠÙ„ Ù…Ù†Ø­Ù†Ù‰ (Ø§Ù„Ù…ÙˆÙ‚Ø¹-Ø§Ù„Ø²Ù…Ù†) ÙŠÙ…Ø«Ù„ Ø§Ù„ØªØ³Ø§Ø±Ø¹',
        answer: false,
        explanation: 'Ø®Ø·Ø£! Ù…ÙŠÙ„ Ù…Ù†Ø­Ù†Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹-Ø§Ù„Ø²Ù…Ù† ÙŠÙ…Ø«Ù„ Ø§Ù„Ø³Ø±Ø¹Ø©'
      },
      {
        type: 'truefalse',
        question: 'Ø¹Ù†Ø¯ Ø£Ù‚ØµÙ‰ Ø§Ø±ØªÙØ§Ø¹ Ù„Ù„Ø¬Ø³Ù… Ø§Ù„Ù…Ù‚Ø°ÙˆÙ Ø±Ø£Ø³ÙŠØ§Ù‹ ØªÙƒÙˆÙ† Ø³Ø±Ø¹ØªÙ‡ ØµÙØ±Ø§Ù‹',
        answer: true,
        explanation: 'ØµØ­ÙŠØ­! ÙŠØªÙˆÙ‚Ù Ù„Ø­Ø¸ÙŠØ§Ù‹ Ù‚Ø¨Ù„ Ø£Ù† ÙŠØ¹ÙˆØ¯ Ù„Ù„Ø³Ù‚ÙˆØ·'
      },
      {
        type: 'truefalse',
        question: 'Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…ØªØ³Ø§Ø±Ø¹Ø© Ø¨Ø§Ù†ØªØ¸Ø§Ù… ØªØ¹Ù†ÙŠ Ø£Ù† Ø§Ù„ØªØ³Ø§Ø±Ø¹ ÙŠØªØºÙŠØ± Ø¨Ø§Ù†ØªØ¸Ø§Ù…',
        answer: false,
        explanation: 'Ø®Ø·Ø£! ØªØ¹Ù†ÙŠ Ø£Ù† Ø§Ù„ØªØ³Ø§Ø±Ø¹ Ø«Ø§Ø¨Øª Ù„Ø§ ÙŠØªØºÙŠØ±'
      },

      // Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯ (10 Ø£Ø³Ø¦Ù„Ø©)
      {
        type: 'multiple',
        question: 'Ù…Ø§ ÙˆØ­Ø¯Ø© Ù‚ÙŠØ§Ø³ Ø§Ù„ØªØ³Ø§Ø±Ø¹ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„ÙŠØŸ',
        options: ['m/s', 'm/sÂ²', 'km/h', 'N'],
        answer: 1,
        explanation: 'Ø§Ù„ØªØ³Ø§Ø±Ø¹ = Ø§Ù„Ø³Ø±Ø¹Ø© Ã· Ø§Ù„Ø²Ù…Ù† = (m/s) Ã· s = m/sÂ²'
      },
      {
        type: 'multiple',
        question: 'Ø³ÙŠØ§Ø±Ø© ØªØªØ­Ø±Ùƒ Ø¨Ø³Ø±Ø¹Ø© 20 m/s Ø«Ù… Ø£ØµØ¨Ø­Øª 60 m/s Ø®Ù„Ø§Ù„ 4 Ø«ÙˆØ§Ù†. Ù…Ø§ ØªØ³Ø§Ø±Ø¹Ù‡Ø§ØŸ',
        options: ['5 m/sÂ²', '10 m/sÂ²', '15 m/sÂ²', '20 m/sÂ²'],
        answer: 1,
        explanation: 'a = (vâ‚‚ - vâ‚)/t = (60-20)/4 = 40/4 = 10 m/sÂ²'
      },
      {
        type: 'multiple',
        question: 'Ø£ÙŠ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© ØªØµÙ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø¨ÙŠÙ† Ø§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§Ù„ØªØ³Ø§Ø±Ø¹ ÙˆØ§Ù„Ø²Ù…Ù†ØŸ',
        options: ['v = vâ‚€ + at', 'v = vâ‚€ - at', 'v = atÂ²', 'v = vâ‚€/t'],
        answer: 0,
        explanation: 'Ù‡Ø°Ù‡ Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© = Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ© + Ø§Ù„ØªØ³Ø§Ø±Ø¹ Ã— Ø§Ù„Ø²Ù…Ù†'
      },
      {
        type: 'multiple',
        question: 'Ø¬Ø³Ù… Ø³Ù‚Ø· Ù…Ù† Ø§Ù„Ø³ÙƒÙˆÙ†ØŒ ÙƒÙ… ØªÙƒÙˆÙ† Ø³Ø±Ø¹ØªÙ‡ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ØŸ (g = 10 m/sÂ²)',
        options: ['10 m/s', '20 m/s', '30 m/s', '40 m/s'],
        answer: 2,
        explanation: 'v = vâ‚€ + gt = 0 + 10 Ã— 3 = 30 m/s'
      },
      {
        type: 'multiple',
        question: 'Ù…Ø§ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„ØªÙŠ ÙŠÙ‚Ø·Ø¹Ù‡Ø§ Ø¬Ø³Ù… ÙŠØªØ­Ø±Ùƒ Ø¨ØªØ³Ø§Ø±Ø¹ 2 m/sÂ² Ù…Ù† Ø§Ù„Ø³ÙƒÙˆÙ† Ø®Ù„Ø§Ù„ 5 Ø«ÙˆØ§Ù†ØŸ',
        options: ['10 m', '25 m', '50 m', '100 m'],
        answer: 1,
        explanation: 'd = Â½atÂ² = Â½ Ã— 2 Ã— 25 = 25 m'
      },
      {
        type: 'multiple',
        question: 'Ù…Ø§Ø°Ø§ ÙŠØ­Ø¯Ø« Ù„Ù„Ø³Ø±Ø¹Ø© Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ø§Ù„ØªØ³Ø§Ø±Ø¹ Ø³Ø§Ù„Ø¨Ø§Ù‹ ÙˆØ§Ù„Ø³Ø±Ø¹Ø© Ù…ÙˆØ¬Ø¨Ø©ØŸ',
        options: ['ØªØ²Ø¯Ø§Ø¯ Ø§Ù„Ø³Ø±Ø¹Ø©', 'ØªÙ‚Ù„ Ø§Ù„Ø³Ø±Ø¹Ø©', 'ØªØ¨Ù‚Ù‰ Ø«Ø§Ø¨ØªØ©', 'ØªØµØ¨Ø­ ØµÙØ±Ø§Ù‹ ÙÙˆØ±Ø§Ù‹'],
        answer: 1,
        explanation: 'Ø§Ù„ØªØ³Ø§Ø±Ø¹ Ø§Ù„Ù…Ø¹Ø§ÙƒØ³ Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø±ÙƒØ© ÙŠØ³Ø¨Ø¨ ØªØ¨Ø§Ø·Ø¤Ø§Ù‹'
      },
      {
        type: 'multiple',
        question: 'ÙÙŠ Ø£ÙŠ Ø­Ø§Ù„Ø© ÙŠÙƒÙˆÙ† Ù…ÙŠÙ„ Ø®Ø· (v-t) ØµÙØ±Ø§Ù‹ØŸ',
        options: ['Ø¹Ù†Ø¯Ù…Ø§ Ø§Ù„Ø¬Ø³Ù… Ø³Ø§ÙƒÙ†', 'Ø¹Ù†Ø¯Ù…Ø§ ÙŠØªØ­Ø±Ùƒ Ø¨Ø³Ø±Ø¹Ø© Ø«Ø§Ø¨ØªØ©', 'Ø¹Ù†Ø¯Ù…Ø§ ÙŠØªØ³Ø§Ø±Ø¹', 'Ø¹Ù†Ø¯Ù…Ø§ ÙŠØªØ¨Ø§Ø·Ø£'],
        answer: 1,
        explanation: 'Ù…ÙŠÙ„ ØµÙØ± = ØªØ³Ø§Ø±Ø¹ ØµÙØ± = Ø³Ø±Ø¹Ø© Ø«Ø§Ø¨ØªØ©'
      },
      {
        type: 'multiple',
        question: 'Ù‚Ø°Ù Ø¬Ø³Ù… Ø±Ø£Ø³ÙŠØ§Ù‹ Ù„Ù„Ø£Ø¹Ù„Ù‰ Ø¨Ø³Ø±Ø¹Ø© 40 m/s. ÙƒÙ… ÙŠØ³ØªØºØ±Ù‚ Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ø£Ù‚ØµÙ‰ Ø§Ø±ØªÙØ§Ø¹ØŸ (g = 10 m/sÂ²)',
        options: ['2 s', '4 s', '6 s', '8 s'],
        answer: 1,
        explanation: 'Ø¹Ù†Ø¯ Ø£Ù‚ØµÙ‰ Ø§Ø±ØªÙØ§Ø¹ v = 0, t = vâ‚€/g = 40/10 = 4 s'
      },
      {
        type: 'multiple',
        question: 'Ø£ÙŠ Ø§Ù„Ø¹ÙˆØ§Ù…Ù„ Ù„Ø§ ÙŠØ¤Ø«Ø± ÙÙŠ ØªØ³Ø§Ø±Ø¹ Ø§Ù„Ø³Ù‚ÙˆØ· Ø§Ù„Ø­Ø± (Ù…Ø¹ Ø¥Ù‡Ù…Ø§Ù„ Ù…Ù‚Ø§ÙˆÙ…Ø© Ø§Ù„Ù‡ÙˆØ§Ø¡)ØŸ',
        options: ['ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø³Ù…', 'Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø³Ù‚ÙˆØ·', 'Ø´ÙƒÙ„ Ø§Ù„Ø¬Ø³Ù…', 'Ø¬Ù…ÙŠØ¹ Ù…Ø§ Ø³Ø¨Ù‚'],
        answer: 3,
        explanation: 'ØªØ³Ø§Ø±Ø¹ Ø§Ù„Ø³Ù‚ÙˆØ· Ø§Ù„Ø­Ø± Ø«Ø§Ø¨Øª ÙˆÙ„Ø§ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø®ØµØ§Ø¦Øµ Ø§Ù„Ø¬Ø³Ù…'
      },
      {
        type: 'multiple',
        question: 'Ø³ÙŠØ§Ø±Ø© ØªØ³ÙŠØ± Ø¨Ø³Ø±Ø¹Ø© 30 m/s ÙØ±Ù…Ù„Øª Ø¨ØªØ³Ø§Ø±Ø¹ -5 m/sÂ². ÙƒÙ… ØªØ­ØªØ§Ø¬ Ù„Ù„ØªÙˆÙ‚ÙØŸ',
        options: ['3 s', '6 s', '9 s', '12 s'],
        answer: 1,
        explanation: 't = (v - vâ‚€)/a = (0 - 30)/(-5) = 6 s'
      },

      // Ù…Ø³Ø§Ø¦Ù„ Ø­Ø³Ø§Ø¨ÙŠØ© (5 Ø£Ø³Ø¦Ù„Ø©)
      {
        type: 'calculation',
        question: 'Ø³ÙŠØ§Ø±Ø© ØªØªØ­Ø±Ùƒ Ù…Ù† Ø§Ù„Ø³ÙƒÙˆÙ† Ø¨ØªØ³Ø§Ø±Ø¹ 4 m/sÂ². Ø§Ø­Ø³Ø¨ Ø³Ø±Ø¹ØªÙ‡Ø§ Ø¨Ø¹Ø¯ 8 Ø«ÙˆØ§Ù†.',
        answer: '32',
        unit: 'm/s',
        explanation: 'v = vâ‚€ + at = 0 + 4 Ã— 8 = 32 m/s'
      },
      {
        type: 'calculation',
        question: 'Ø¬Ø³Ù… Ø³Ù‚Ø· Ø³Ù‚ÙˆØ·Ø§Ù‹ Ø­Ø±Ø§Ù‹ Ù…Ù† Ø§Ø±ØªÙØ§Ø¹. Ø¥Ø°Ø§ Ø§Ø³ØªØºØ±Ù‚ 5 Ø«ÙˆØ§Ù† Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø£Ø±Ø¶ØŒ Ø§Ø­Ø³Ø¨ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹. (g = 10 m/sÂ²)',
        answer: '125',
        unit: 'm',
        explanation: 'h = Â½gtÂ² = Â½ Ã— 10 Ã— 25 = 125 m'
      },
      {
        type: 'calculation',
        question: 'Ø³ÙŠØ§Ø±Ø© ØªØ³ÙŠØ± Ø¨Ø³Ø±Ø¹Ø© 20 m/s ØªØ³Ø§Ø±Ø¹Øª Ù„ØªØµÙ„ Ø¥Ù„Ù‰ 50 m/s Ø®Ù„Ø§Ù„ 6 Ø«ÙˆØ§Ù†. Ø§Ø­Ø³Ø¨ Ø§Ù„ØªØ³Ø§Ø±Ø¹.',
        answer: '5',
        unit: 'm/sÂ²',
        explanation: 'a = (v - vâ‚€)/t = (50 - 20)/6 = 30/6 = 5 m/sÂ²'
      },
      {
        type: 'calculation',
        question: 'Ù‚Ø°ÙØª ÙƒØ±Ø© Ø±Ø£Ø³ÙŠØ§Ù‹ Ù„Ù„Ø£Ø¹Ù„Ù‰ Ø¨Ø³Ø±Ø¹Ø© 30 m/s. Ø§Ø­Ø³Ø¨ Ø£Ù‚ØµÙ‰ Ø§Ø±ØªÙØ§Ø¹ ØªØµÙ„Ù‡. (g = 10 m/sÂ²)',
        answer: '45',
        unit: 'm',
        explanation: 'h = vâ‚€Â²/(2g) = 900/20 = 45 m'
      },
      {
        type: 'calculation',
        question: 'Ù‚Ø·Ø§Ø± ÙŠØªØ­Ø±Ùƒ Ø¨Ø³Ø±Ø¹Ø© 36 km/h (Ø£ÙŠ 10 m/s) Ø¨Ø¯Ø£ ÙŠØªØ¨Ø§Ø·Ø£ Ø¨ØªØ³Ø§Ø±Ø¹ -2 m/sÂ². Ø§Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø­ØªÙ‰ ÙŠØªÙˆÙ‚Ù.',
        answer: '25',
        unit: 'm',
        explanation: 'vÂ² = vâ‚€Â² + 2ad â†’ 0 = 100 + 2(-2)d â†’ d = 25 m'
      }
    ];

    // Shuffle questions
    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    let shuffledQuestions = shuffleArray(questions);

    // Initialize SDKs
    async function initApp() {
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (newConfig) => {
            config = { ...defaultConfig, ...newConfig };
            document.getElementById('main-title').textContent = config.quiz_title;
          },
          mapToCapabilities: (cfg) => ({
            recolorables: [
              { get: () => cfg.background_color || defaultConfig.background_color, set: (v) => { cfg.background_color = v; window.elementSdk.setConfig({ background_color: v }); }},
              { get: () => cfg.surface_color || defaultConfig.surface_color, set: (v) => { cfg.surface_color = v; window.elementSdk.setConfig({ surface_color: v }); }},
              { get: () => cfg.text_color || defaultConfig.text_color, set: (v) => { cfg.text_color = v; window.elementSdk.setConfig({ text_color: v }); }},
              { get: () => cfg.primary_color || defaultConfig.primary_color, set: (v) => { cfg.primary_color = v; window.elementSdk.setConfig({ primary_color: v }); }},
              { get: () => cfg.accent_color || defaultConfig.accent_color, set: (v) => { cfg.accent_color = v; window.elementSdk.setConfig({ accent_color: v }); }}
            ],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (cfg) => new Map([
            ['quiz_title', cfg.quiz_title || defaultConfig.quiz_title]
          ])
        });
      }
    }

    initApp();

    // Login Functions
    function handleStudentLogin() {
      const name = document.getElementById('student-name').value.trim();
      const password = document.getElementById('student-password').value;
      const errorEl = document.getElementById('login-error');

      if (!name) {
        errorEl.textContent = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ';
        errorEl.classList.remove('hidden');
        return;
      }

      if (password !== '2010') {
        errorEl.textContent = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
        errorEl.classList.remove('hidden');
        return;
      }

      errorEl.classList.add('hidden');
      currentStudentName = name;
      startTime = new Date();
      startQuiz();
    }

    function showAdminLogin() {
      document.getElementById('login-page').classList.add('hidden');
      document.getElementById('admin-login-page').classList.remove('hidden');
    }

    function backToStudentLogin() {
      document.getElementById('admin-login-page').classList.add('hidden');
      document.getElementById('login-page').classList.remove('hidden');
    }

    function handleAdminLogin() {
      const username = document.getElementById('admin-username').value.trim();
      const password = document.getElementById('admin-password').value;
      const errorEl = document.getElementById('admin-login-error');

      if (username !== 'Hozan' || password !== '2010') {
        errorEl.textContent = 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
        errorEl.classList.remove('hidden');
        return;
      }

      errorEl.classList.add('hidden');
      showAdminDashboard();
    }

    function logoutAdmin() {
      document.getElementById('admin-page').classList.add('hidden');
      document.getElementById('login-page').classList.remove('hidden');
      document.getElementById('admin-username').value = '';
      document.getElementById('admin-password').value = '';
    }

    // Quiz Functions
    function startQuiz() {
      document.getElementById('login-page').classList.add('hidden');
      document.getElementById('quiz-page').classList.remove('hidden');
      document.getElementById('display-name').textContent = currentStudentName;
      currentQuestion = 0;
      score = 0;
      shuffledQuestions = shuffleArray(questions);
      showQuestion();
    }

    function showQuestion() {
      const q = shuffledQuestions[currentQuestion];
      const container = document.getElementById('question-container');
      
      document.getElementById('current-q').textContent = currentQuestion + 1;
      document.getElementById('score').textContent = score;
      document.getElementById('progress').style.width = ((currentQuestion + 1) / 25 * 100) + '%';

      let html = `
        <div class="mb-6">
          <span class="inline-block px-3 py-1 rounded-full text-sm font-medium ${
            q.type === 'truefalse' ? 'bg-blue-100 text-blue-700' : 
            q.type === 'multiple' ? 'bg-purple-100 text-purple-700' : 
            'bg-green-100 text-green-700'
          }">
            ${q.type === 'truefalse' ? 'âœ“âœ— ØµØ­ Ø£Ùˆ ØºÙ„Ø·' : q.type === 'multiple' ? 'ğŸ“ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯' : 'ğŸ”¢ Ù…Ø³Ø£Ù„Ø© Ø­Ø³Ø§Ø¨ÙŠØ©'}
          </span>
        </div>
        <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-6">${q.question}</h2>
      `;

      if (q.type === 'truefalse') {
        html += `
          <div class="grid grid-cols-2 gap-4">
            <button onclick="checkAnswer(true)" class="btn-success text-white font-bold py-4 rounded-xl text-lg hover:opacity-90 transition">
              âœ“ ØµØ­
            </button>
            <button onclick="checkAnswer(false)" class="btn-danger text-white font-bold py-4 rounded-xl text-lg hover:opacity-90 transition">
              âœ— ØºÙ„Ø·
            </button>
          </div>
        `;
      } else if (q.type === 'multiple') {
        html += '<div class="space-y-3">';
        q.options.forEach((opt, i) => {
          html += `
            <button onclick="checkAnswer(${i})" class="w-full text-right p-4 rounded-xl border-2 border-gray-200 hover:border-purple-500 hover:bg-purple-50 transition font-medium text-gray-700">
              <span class="inline-block w-8 h-8 rounded-full bg-purple-100 text-purple-700 text-center leading-8 ml-3">${['Ø£', 'Ø¨', 'Ø¬', 'Ø¯'][i]}</span>
              ${opt}
            </button>
          `;
        });
        html += '</div>';
      } else {
        html += `
          <div class="space-y-4">
            <div class="flex items-center gap-3">
              <input type="number" id="calc-answer" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©" 
                class="flex-1 px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:outline-none text-lg">
              <span class="text-gray-600 font-medium">${q.unit}</span>
            </div>
            <button onclick="checkCalculation()" class="btn-primary w-full text-white font-bold py-4 rounded-xl text-lg">
              âœ“ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
            </button>
          </div>
        `;
      }

      container.innerHTML = html;
    }

    function checkAnswer(answer) {
      const q = shuffledQuestions[currentQuestion];
      const isCorrect = answer === q.answer;
      if (isCorrect) score++;
      showFeedback(isCorrect, q.explanation);
    }

    function checkCalculation() {
      const q = shuffledQuestions[currentQuestion];
      const userAnswer = document.getElementById('calc-answer').value.trim();
      const isCorrect = userAnswer === q.answer;
      if (isCorrect) score++;
      showFeedback(isCorrect, q.explanation);
    }

    function showFeedback(isCorrect, explanation) {
      const container = document.getElementById('question-container');
      container.innerHTML = `
        <div class="text-center py-8">
          <div class="text-7xl mb-4">${isCorrect ? 'ğŸ‰' : 'ğŸ˜”'}</div>
          <h2 class="text-2xl font-bold ${isCorrect ? 'text-green-600' : 'text-red-600'} mb-4">
            ${isCorrect ? 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!' : 'Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©'}
          </h2>
          <div class="bg-gray-100 rounded-xl p-4 mb-6 text-gray-700">
            <p class="font-medium">Ø§Ù„ØªÙˆØ¶ÙŠØ­:</p>
            <p>${explanation}</p>
          </div>
          <button onclick="nextQuestion()" class="btn-primary text-white font-bold py-4 px-8 rounded-xl text-lg">
            ${currentQuestion < 24 ? 'Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â†' : 'Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©'}
          </button>
        </div>
      `;
    }

    function nextQuestion() {
      currentQuestion++;
      if (currentQuestion < 25) {
        showQuestion();
      } else {
        showResults();
      }
    }

    async function showResults() {
      document.getElementById('quiz-page').classList.add('hidden');
      document.getElementById('results-page').classList.remove('hidden');

      const percentage = Math.round((score / 25) * 100);
      const endTime = new Date();
      const timeTaken = Math.round((endTime - startTime) / 1000 / 60);

      document.getElementById('result-name').textContent = `Ø£Ø­Ø³Ù†Øª ÙŠØ§ ${currentStudentName}!`;
      document.getElementById('final-score').textContent = score;
      document.getElementById('percentage').textContent = `${percentage}%`;

      let emoji, message;
      if (percentage >= 90) {
        emoji = 'ğŸ†';
        message = 'Ù…Ù…ØªØ§Ø²! Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹ Ø¬Ø¯Ø§Ù‹!';
      } else if (percentage >= 75) {
        emoji = 'ğŸŒŸ';
        message = 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹! Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªÙÙˆÙ‚!';
      } else if (percentage >= 60) {
        emoji = 'ğŸ‘';
        message = 'Ø¬ÙŠØ¯! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ­Ø³Ù† Ø£ÙƒØ«Ø±!';
      } else {
        emoji = 'ğŸ’ª';
        message = 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ÙØ¹Ù„Ù‡Ø§!';
      }

      document.getElementById('result-emoji').textContent = emoji;
      document.getElementById('result-message').textContent = message;

      // Save to local storage
      const studentResult = {
        student_name: currentStudentName,
        score: score,
        total_questions: 25,
        completed_at: new Date().toISOString(),
        time_taken: `${timeTaken} Ø¯Ù‚ÙŠÙ‚Ø©`
      };
      
      let allResults = JSON.parse(localStorage.getItem('quizResults') || '[]');
      allResults.push(studentResult);
      localStorage.setItem('quizResults', JSON.stringify(allResults));
    }

    function restartQuiz() {
      document.getElementById('results-page').classList.add('hidden');
      document.getElementById('login-page').classList.remove('hidden');
      document.getElementById('student-name').value = '';
      document.getElementById('student-password').value = '';
      currentQuestion = 0;
      score = 0;
    }

    // Admin Dashboard
    function showAdminDashboard() {
      document.getElementById('admin-login-page').classList.add('hidden');
      document.getElementById('admin-page').classList.remove('hidden');
      updateAdminDashboard();
    }

    function updateAdminDashboard() {
      const listEl = document.getElementById('students-list');
      
      // Load from local storage
      studentsData = JSON.parse(localStorage.getItem('quizResults') || '[]');
      
      if (!studentsData || studentsData.length === 0) {
        listEl.innerHTML = `
          <div class="text-center text-gray-500 py-8">
            <div class="text-4xl mb-2">ğŸ“­</div>
            <p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø§Ø¨ Ø¨Ø¹Ø¯</p>
          </div>
        `;
        document.getElementById('total-students').textContent = '0';
        document.getElementById('highest-score').textContent = '0';
        document.getElementById('average-score').textContent = '0';
        return;
      }

      const total = studentsData.length;
      const scores = studentsData.map(s => s.score || 0);
      const highest = Math.max(...scores);
      const average = Math.round(scores.reduce((sum, s) => sum + s, 0) / total);

      document.getElementById('total-students').textContent = total;
      document.getElementById('highest-score').textContent = highest;
      document.getElementById('average-score').textContent = average;

      listEl.innerHTML = studentsData.map((student, index) => {
        let dateStr = 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
        try {
          const date = new Date(student.completed_at);
          dateStr = date.toLocaleDateString('ar-EG', { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
        } catch (e) {
          dateStr = student.completed_at || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
        }
        
        const score = student.score || 0;
        const pct = Math.round((score / 25) * 100);
        const colorClass = pct >= 75 ? 'text-green-600' : pct >= 50 ? 'text-yellow-600' : 'text-red-600';
        
        return `
          <div class="bg-gray-50 rounded-xl p-4 flex items-center justify-between">
            <div class="flex items-center gap-4">
              <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-700 font-bold">
                ${index + 1}
              </div>
              <div>
                <p class="font-bold text-gray-800">${student.student_name || 'Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…'}</p>
                <p class="text-sm text-gray-500">${dateStr}</p>
              </div>
            </div>
            <div class="text-left">
              <p class="text-2xl font-bold ${colorClass}">${score}/25</p>
              <p class="text-sm text-gray-500">${pct}% - ${student.time_taken || ''}</p>
            </div>
          </div>
        `;
      }).join('');
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9d4a2080a51e2cff',t:'MTc3MjIyMDk0NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
