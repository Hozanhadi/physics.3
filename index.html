<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ - Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…ØªØ³Ø§Ø±Ø¹Ø©</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&amp;display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Tajawal', sans-serif; }
    .gradient-bg {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    }
    .card-glass {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .btn-primary {
      background: linear-gradient(135deg, #e94560 0%, #ff6b6b 100%);
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(233, 69, 96, 0.4);
    }
    .option-btn {
      transition: all 0.3s ease;
    }
    .option-btn:hover {
      transform: translateX(-5px);
      background: rgba(233, 69, 96, 0.2);
    }
    .option-btn.selected {
      background: rgba(233, 69, 96, 0.3);
      border-color: #e94560;
    }
    .option-btn.correct {
      background: rgba(34, 197, 94, 0.3);
      border-color: #22c55e;
    }
    .option-btn.wrong {
      background: rgba(239, 68, 68, 0.3);
      border-color: #ef4444;
    }
    .progress-bar {
      background: linear-gradient(90deg, #e94560, #ff6b6b);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade { animation: fadeIn 0.5s ease forwards; }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    .pulse { animation: pulse 2s infinite; }
    .scrollbar-thin::-webkit-scrollbar { width: 6px; }
    .scrollbar-thin::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); border-radius: 3px; }
    .scrollbar-thin::-webkit-scrollbar-thumb { background: #e94560; border-radius: 3px; }
  </style>
  <style>body { box-sizing: border-box; }</style>
 </head>
 <body class="h-full gradient-bg text-white overflow-auto">
  <div id="app" class="min-h-full w-full"><!-- Login Page -->
   <div id="loginPage" class="min-h-full flex items-center justify-center p-4">
    <div class="card-glass rounded-3xl p-8 w-full max-w-md animate-fade">
     <div class="text-center mb-8">
      <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-pink-500 to-red-500 flex items-center justify-center pulse">
       <svg class="w-10 h-10" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
       </svg>
      </div>
      <h1 id="mainTitle" class="text-3xl font-bold mb-2">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡</h1>
      <p class="text-gray-400">Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù„Ø«: Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…ØªØ³Ø§Ø±Ø¹Ø©</p>
     </div>
     <div class="space-y-4">
      <div><label class="block text-sm text-gray-300 mb-2">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</label> <input type="text" id="studentName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 focus:border-pink-500 focus:outline-none transition">
      </div>
      <div><label class="block text-sm text-gray-300 mb-2">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label> <input type="password" id="studentPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 focus:border-pink-500 focus:outline-none transition">
      </div>
      <div id="loginError" class="hidden text-red-400 text-sm text-center"></div><button onclick="handleLogin()" class="w-full btn-primary text-white font-bold py-3 rounded-xl"> Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± </button>
      <div class="text-center pt-4 border-t border-white/10"><button onclick="showAdminLogin()" class="text-gray-400 hover:text-pink-400 text-sm transition"> ğŸ” Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ± </button>
      </div>
     </div>
    </div>
   </div><!-- Admin Login -->
   <div id="adminLoginPage" class="hidden min-h-full flex items-center justify-center p-4">
    <div class="card-glass rounded-3xl p-8 w-full max-w-md animate-fade">
     <div class="text-center mb-8">
      <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-purple-500 to-indigo-500 flex items-center justify-center">
       <svg class="w-10 h-10" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
       </svg>
      </div>
      <h1 class="text-3xl font-bold mb-2">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±</h1>
      <p class="text-gray-400">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±</p>
     </div>
     <div class="space-y-4">
      <div><label class="block text-sm text-gray-300 mb-2">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label> <input type="text" id="adminUsername" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 focus:border-purple-500 focus:outline-none transition">
      </div>
      <div><label class="block text-sm text-gray-300 mb-2">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label> <input type="password" id="adminPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 focus:border-purple-500 focus:outline-none transition">
      </div>
      <div id="adminLoginError" class="hidden text-red-400 text-sm text-center"></div><button onclick="handleAdminLogin()" class="w-full bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white font-bold py-3 rounded-xl transition"> Ø¯Ø®ÙˆÙ„ </button> <button onclick="backToLogin()" class="w-full text-gray-400 hover:text-white py-2 transition"> â† Ø§Ù„Ø¹ÙˆØ¯Ø© </button>
     </div>
    </div>
   </div><!-- Quiz Page -->
   <div id="quizPage" class="hidden min-h-full p-4">
    <div class="max-w-3xl mx-auto"><!-- Header -->
     <div class="card-glass rounded-2xl p-4 mb-4">
      <div class="flex justify-between items-center mb-3">
       <div><span class="text-gray-400 text-sm">Ø§Ù„Ø·Ø§Ù„Ø¨:</span> <span id="displayStudentName" class="font-bold text-pink-400 mr-2"></span>
       </div>
       <div class="text-left"><span class="text-gray-400 text-sm">Ø§Ù„Ø³Ø¤Ø§Ù„</span> <span id="questionNumber" class="font-bold text-2xl text-pink-400 mx-2">1</span> <span class="text-gray-400 text-sm">Ù…Ù† 25</span>
       </div>
      </div>
      <div class="h-2 bg-white/10 rounded-full overflow-hidden">
       <div id="progressBar" class="h-full progress-bar rounded-full transition-all duration-500" style="width: 4%"></div>
      </div>
     </div><!-- Question Card -->
     <div class="card-glass rounded-2xl p-6 mb-4 animate-fade" id="questionCard">
      <div id="questionType" class="inline-block px-3 py-1 rounded-full text-xs font-bold mb-4 bg-pink-500/20 text-pink-400"></div>
      <h2 id="questionText" class="text-xl font-bold mb-6 leading-relaxed"></h2>
      <div id="optionsContainer" class="space-y-3"></div>
      <div id="problemSolution" class="hidden mt-4 p-4 rounded-xl bg-white/5 border border-white/10">
       <p class="text-gray-300 text-sm" id="solutionText"></p>
      </div>
     </div><!-- Navigation -->
     <div class="flex gap-3"><button id="prevBtn" onclick="prevQuestion()" class="flex-1 card-glass py-3 rounded-xl font-bold hover:bg-white/10 transition disabled:opacity-50" disabled> â† Ø§Ù„Ø³Ø§Ø¨Ù‚ </button> <button id="nextBtn" onclick="nextQuestion()" class="flex-1 btn-primary py-3 rounded-xl font-bold"> Ø§Ù„ØªØ§Ù„ÙŠ â†’ </button> <button id="submitBtn" onclick="submitQuiz()" class="hidden flex-1 bg-gradient-to-r from-green-500 to-emerald-500 py-3 rounded-xl font-bold hover:from-green-600 hover:to-emerald-600 transition"> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª âœ“ </button>
     </div>
    </div>
   </div><!-- Results Page -->
   <div id="resultsPage" class="hidden min-h-full flex items-center justify-center p-4">
    <div class="card-glass rounded-3xl p-8 w-full max-w-lg text-center animate-fade">
     <div id="resultIcon" class="w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center text-5xl"></div>
     <h1 class="text-3xl font-bold mb-2">Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h1>
     <p id="resultStudentName" class="text-gray-400 mb-6"></p>
     <div class="grid grid-cols-2 gap-4 mb-6">
      <div class="card-glass rounded-xl p-4">
       <p class="text-gray-400 text-sm">Ø§Ù„Ø¯Ø±Ø¬Ø©</p>
       <p id="scoreDisplay" class="text-3xl font-bold text-pink-400"></p>
      </div>
      <div class="card-glass rounded-xl p-4">
       <p class="text-gray-400 text-sm">Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©</p>
       <p id="percentageDisplay" class="text-3xl font-bold text-green-400"></p>
      </div>
     </div>
     <div id="resultMessage" class="text-lg mb-6"></div><button onclick="restartQuiz()" class="btn-primary w-full py-3 rounded-xl font-bold"> Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± </button>
    </div>
   </div><!-- Admin Panel -->
   <div id="adminPanel" class="hidden min-h-full p-4">
    <div class="max-w-4xl mx-auto">
     <div class="card-glass rounded-2xl p-6 mb-4">
      <div class="flex justify-between items-center">
       <div>
        <h1 class="text-2xl font-bold">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±</h1>
        <p class="text-gray-400">Ù…Ø±Ø­Ø¨Ø§Ù‹ Hozan</p>
       </div><button onclick="logoutAdmin()" class="px-4 py-2 rounded-xl bg-red-500/20 text-red-400 hover:bg-red-500/30 transition"> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ </button>
      </div>
     </div>
     <div class="card-glass rounded-2xl p-6">
      <div class="flex justify-between items-center mb-6">
       <h2 class="text-xl font-bold">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø·Ù„Ø§Ø¨</h2><span id="totalStudents" class="px-3 py-1 rounded-full bg-pink-500/20 text-pink-400 text-sm"></span>
      </div>
      <div id="studentsTable" class="overflow-x-auto">
       <table class="w-full">
        <thead>
         <tr class="border-b border-white/10">
          <th class="text-right py-3 px-4 text-gray-400 font-medium">#</th>
          <th class="text-right py-3 px-4 text-gray-400 font-medium">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
          <th class="text-right py-3 px-4 text-gray-400 font-medium">Ø§Ù„Ø¯Ø±Ø¬Ø©</th>
          <th class="text-right py-3 px-4 text-gray-400 font-medium">Ø§Ù„Ù†Ø³Ø¨Ø©</th>
          <th class="text-right py-3 px-4 text-gray-400 font-medium">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
          <th class="text-right py-3 px-4 text-gray-400 font-medium">Ø¥Ø¬Ø±Ø§Ø¡</th>
         </tr>
        </thead>
        <tbody id="studentsBody"></tbody>
       </table>
      </div>
      <div id="noStudents" class="hidden text-center py-12 text-gray-400">
       <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
       </svg>
       <p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø§Ø¨ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>
      </div>
     </div>
    </div>
   </div><!-- Delete Confirmation Modal -->
   <div id="deleteModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
    <div class="card-glass rounded-2xl p-6 w-full max-w-sm animate-fade">
     <h3 class="text-xl font-bold mb-4 text-center">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù</h3>
     <p class="text-gray-400 text-center mb-6">Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù†ØªÙŠØ¬Ø© Ù‡Ø°Ø§ Ø§Ù„Ø·Ø§Ù„Ø¨ØŸ</p>
     <div class="flex gap-3"><button onclick="cancelDelete()" class="flex-1 card-glass py-2 rounded-xl hover:bg-white/10 transition">Ø¥Ù„ØºØ§Ø¡</button> <button onclick="confirmDelete()" class="flex-1 bg-red-500 hover:bg-red-600 py-2 rounded-xl transition">Ø­Ø°Ù</button>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Questions Database
    const questions = [
      // True/False Questions (1-10)
      { id: 1, type: 'tf', question: 'Ø§Ù„ØªØ³Ø§Ø±Ø¹ Ù‡Ùˆ Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØºÙŠØ± ÙÙŠ Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù…ØªØ¬Ù‡Ø© Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù„Ø²Ù…Ù†.', answer: true, explanation: 'ØµØ­ÙŠØ­ØŒ Ø§Ù„ØªØ³Ø§Ø±Ø¹ = Ø§Ù„ØªØºÙŠØ± ÙÙŠ Ø§Ù„Ø³Ø±Ø¹Ø© Ã· Ø§Ù„Ø²Ù…Ù†' },
      { id: 2, type: 'tf', question: 'Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ø§Ù„ØªØ³Ø§Ø±Ø¹ ØµÙØ±Ø§Ù‹ØŒ ÙØ¥Ù† Ø§Ù„Ø¬Ø³Ù… ÙŠÙƒÙˆÙ† Ø³Ø§ÙƒÙ†Ø§Ù‹ Ø­ØªÙ…Ø§Ù‹.', answer: false, explanation: 'Ø®Ø·Ø£ØŒ Ù‚Ø¯ ÙŠØªØ­Ø±Ùƒ Ø¨Ø³Ø±Ø¹Ø© Ø«Ø§Ø¨ØªØ©' },
      { id: 3, type: 'tf', question: 'Ø§Ù„Ø³Ù‚ÙˆØ· Ø§Ù„Ø­Ø± Ù‡Ùˆ Ø­Ø±ÙƒØ© Ø¬Ø³Ù… ØªØ­Øª ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ© ÙÙ‚Ø·.', answer: true, explanation: 'ØµØ­ÙŠØ­ØŒ Ø¨Ø¯ÙˆÙ† Ù…Ù‚Ø§ÙˆÙ…Ø© Ø§Ù„Ù‡ÙˆØ§Ø¡' },
      { id: 4, type: 'tf', question: 'ØªØ³Ø§Ø±Ø¹ Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ© Ø§Ù„Ø£Ø±Ø¶ÙŠØ© Ø«Ø§Ø¨Øª ÙˆÙŠØ³Ø§ÙˆÙŠ 9.8 m/sÂ² ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹.', answer: true, explanation: 'ØµØ­ÙŠØ­ØŒ Ø¹Ù†Ø¯ Ø³Ø·Ø­ Ø§Ù„Ø£Ø±Ø¶' },
      { id: 5, type: 'tf', question: 'Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªØ³Ø§Ø±Ø¹ Ø³Ø§Ù„Ø¨Ø§Ù‹ØŒ ÙØ¥Ù† Ø§Ù„Ø¬Ø³Ù… ÙŠØªØ¨Ø§Ø·Ø£ Ø¯Ø§Ø¦Ù…Ø§Ù‹.', answer: false, explanation: 'Ø®Ø·Ø£ØŒ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø³Ø±Ø¹Ø©' },
      { id: 6, type: 'tf', question: 'ÙÙŠ Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…ØªØ³Ø§Ø±Ø¹Ø© Ø¨Ø§Ù†ØªØ¸Ø§Ù…ØŒ ÙŠØªØºÙŠØ± Ø§Ù„ØªØ³Ø§Ø±Ø¹ Ù…Ø¹ Ø§Ù„Ø²Ù…Ù†.', answer: false, explanation: 'Ø®Ø·Ø£ØŒ Ø§Ù„ØªØ³Ø§Ø±Ø¹ Ø«Ø§Ø¨Øª' },
      { id: 7, type: 'tf', question: 'Ø§Ù„Ù…Ø³Ø§Ø­Ø© ØªØ­Øª Ù…Ù†Ø­Ù†Ù‰ Ø§Ù„Ø³Ø±Ø¹Ø©-Ø§Ù„Ø²Ù…Ù† ØªÙ…Ø«Ù„ Ø§Ù„Ø¥Ø²Ø§Ø­Ø©.', answer: true, explanation: 'ØµØ­ÙŠØ­ØŒ Ø§Ù„Ø¥Ø²Ø§Ø­Ø© = Ø§Ù„Ù…Ø³Ø§Ø­Ø© ØªØ­Øª Ø§Ù„Ù…Ù†Ø­Ù†Ù‰' },
      { id: 8, type: 'tf', question: 'Ù…ÙŠÙ„ Ù…Ù†Ø­Ù†Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹-Ø§Ù„Ø²Ù…Ù† ÙŠÙ…Ø«Ù„ Ø§Ù„ØªØ³Ø§Ø±Ø¹.', answer: false, explanation: 'Ø®Ø·Ø£ØŒ ÙŠÙ…Ø«Ù„ Ø§Ù„Ø³Ø±Ø¹Ø©' },
      { id: 9, type: 'tf', question: 'Ø¬Ø³Ù… ÙŠÙÙ‚Ø°Ù Ø±Ø£Ø³ÙŠØ§Ù‹ Ù„Ù„Ø£Ø¹Ù„Ù‰ ÙŠÙƒÙˆÙ† ØªØ³Ø§Ø±Ø¹Ù‡ ØµÙØ±Ø§Ù‹ Ø¹Ù†Ø¯ Ø£Ù‚ØµÙ‰ Ø§Ø±ØªÙØ§Ø¹.', answer: false, explanation: 'Ø®Ø·Ø£ØŒ Ø§Ù„ØªØ³Ø§Ø±Ø¹ = g Ø¯Ø§Ø¦Ù…Ø§Ù‹' },
      { id: 10, type: 'tf', question: 'Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© ØªØ³Ø§ÙˆÙŠ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³Ø±Ø¹ØªÙŠÙ† Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù…Ù‚Ø³ÙˆÙ…Ø§Ù‹ Ø¹Ù„Ù‰ 2.', answer: true, explanation: 'ØµØ­ÙŠØ­ ÙÙŠ Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…ØªØ³Ø§Ø±Ø¹Ø© Ø¨Ø§Ù†ØªØ¸Ø§Ù…' },
      
      // Multiple Choice Questions (11-20)
      { id: 11, type: 'mc', question: 'Ù…Ø§ ÙˆØ­Ø¯Ø© Ù‚ÙŠØ§Ø³ Ø§Ù„ØªØ³Ø§Ø±Ø¹ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙˆÙ„ÙŠØŸ', options: ['m/s', 'm/sÂ²', 'km/h', 'N'], answer: 1, explanation: 'Ù…ØªØ± Ù„ÙƒÙ„ Ø«Ø§Ù†ÙŠØ© Ù…Ø±Ø¨Ø¹Ø©' },
      { id: 12, type: 'mc', question: 'Ø³ÙŠØ§Ø±Ø© ØªØªØ³Ø§Ø±Ø¹ Ù…Ù† Ø§Ù„Ø³ÙƒÙˆÙ† Ø¨Ù…Ø¹Ø¯Ù„ 2 m/sÂ²ØŒ ÙƒÙ… ØªÙƒÙˆÙ† Ø³Ø±Ø¹ØªÙ‡Ø§ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙØŸ', options: ['5 m/s', '7 m/s', '10 m/s', '15 m/s'], answer: 2, explanation: 'v = at = 2Ã—5 = 10 m/s' },
      { id: 13, type: 'mc', question: 'Ø£ÙŠ Ù…Ù† Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© ØªØ±Ø¨Ø· Ø¨ÙŠÙ† Ø§Ù„Ø¥Ø²Ø§Ø­Ø© ÙˆØ§Ù„Ø³Ø±Ø¹Ø© ÙˆØ§Ù„ØªØ³Ø§Ø±Ø¹ØŸ', options: ['v = vâ‚€ + at', 'x = vâ‚€t + Â½atÂ²', 'vÂ² = vâ‚€Â² + 2ax', 'Ø¬Ù…ÙŠØ¹ Ù…Ø§ Ø³Ø¨Ù‚'], answer: 3, explanation: 'Ø¬Ù…ÙŠØ¹Ù‡Ø§ Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„Ø­Ø±ÙƒØ©' },
      { id: 14, type: 'mc', question: 'Ø¬Ø³Ù… ÙŠØ³Ù‚Ø· Ø³Ù‚ÙˆØ·Ø§Ù‹ Ø­Ø±Ø§Ù‹ØŒ ÙƒÙ… ØªÙƒÙˆÙ† Ø³Ø±Ø¹ØªÙ‡ Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†ØŸ', options: ['9.8 m/s', '19.6 m/s', '29.4 m/s', '4.9 m/s'], answer: 1, explanation: 'v = gt = 9.8Ã—2 = 19.6 m/s' },
      { id: 15, type: 'mc', question: 'Ù…Ø§ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„ØªÙŠ ÙŠÙ‚Ø·Ø¹Ù‡Ø§ Ø¬Ø³Ù… Ø³Ø§Ù‚Ø· Ø³Ù‚ÙˆØ·Ø§Ù‹ Ø­Ø±Ø§Ù‹ Ø®Ù„Ø§Ù„ Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø©ØŸ', options: ['9.8 m', '4.9 m', '19.6 m', '2.45 m'], answer: 1, explanation: 'x = Â½gtÂ² = Â½Ã—9.8Ã—1 = 4.9 m' },
      { id: 16, type: 'mc', question: 'Ø³ÙŠØ§Ø±Ø© Ø³Ø±Ø¹ØªÙ‡Ø§ 20 m/s ØªÙˆÙ‚ÙØª Ø®Ù„Ø§Ù„ 4 Ø«ÙˆØ§Ù†ÙØŒ Ù…Ø§ ØªØ³Ø§Ø±Ø¹Ù‡Ø§ØŸ', options: ['-5 m/sÂ²', '-4 m/sÂ²', '5 m/sÂ²', '80 m/sÂ²'], answer: 0, explanation: 'a = Î”v/t = -20/4 = -5 m/sÂ²' },
      { id: 17, type: 'mc', question: 'ÙÙŠ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„Ø³Ø±Ø¹Ø©-Ø§Ù„Ø²Ù…Ù†ØŒ Ø§Ù„Ø®Ø· Ø§Ù„Ø£ÙÙ‚ÙŠ ÙŠØ¯Ù„ Ø¹Ù„Ù‰:', options: ['Ø³Ø±Ø¹Ø© Ù…ØªØ²Ø§ÙŠØ¯Ø©', 'Ø³Ø±Ø¹Ø© Ø«Ø§Ø¨ØªØ©', 'ØªØ³Ø§Ø±Ø¹ Ø«Ø§Ø¨Øª', 'Ø¬Ø³Ù… Ø³Ø§ÙƒÙ†'], answer: 1, explanation: 'Ø§Ù„Ù…ÙŠÙ„ ØµÙØ± = ØªØ³Ø§Ø±Ø¹ ØµÙØ±' },
      { id: 18, type: 'mc', question: 'Ø¬Ø³Ù… Ù‚ÙØ°Ù Ù„Ù„Ø£Ø¹Ù„Ù‰ Ø¨Ø³Ø±Ø¹Ø© 30 m/sØŒ Ù…Ø§ Ø£Ù‚ØµÙ‰ Ø§Ø±ØªÙØ§Ø¹ ÙŠØµÙ„Ù‡ØŸ', options: ['45.9 m', '91.8 m', '30 m', '60 m'], answer: 0, explanation: 'h = vÂ²/2g = 900/19.6 â‰ˆ 45.9 m' },
      { id: 19, type: 'mc', question: 'Ù…ØªÙ‰ ÙŠÙƒÙˆÙ† Ø§Ù„ØªØ³Ø§Ø±Ø¹ ÙˆØ§Ù„Ø³Ø±Ø¹Ø© ÙÙŠ Ù†ÙØ³ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ØŸ', options: ['Ø¹Ù†Ø¯ Ø§Ù„ØªØ¨Ø§Ø·Ø¤', 'Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ø§Ø±Ø¹', 'Ø¹Ù†Ø¯ Ø§Ù„Ø³ÙƒÙˆÙ†', 'Ø¯Ø§Ø¦Ù…Ø§Ù‹'], answer: 1, explanation: 'Ø¹Ù†Ø¯Ù…Ø§ ØªØ²Ø¯Ø§Ø¯ Ø§Ù„Ø³Ø±Ø¹Ø©' },
      { id: 20, type: 'mc', question: 'Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠØ­Ø¯Ø« Ù„Ø¬Ø³Ù… ØªØ³Ø§Ø±Ø¹Ù‡ Ù…ÙˆØ¬Ø¨ ÙˆØ³Ø±Ø¹ØªÙ‡ Ø³Ø§Ù„Ø¨Ø©ØŸ', options: ['ÙŠØªØ³Ø§Ø±Ø¹', 'ÙŠØªØ¨Ø§Ø·Ø£', 'Ø³Ø±Ø¹ØªÙ‡ Ø«Ø§Ø¨ØªØ©', 'Ø³Ø§ÙƒÙ†'], answer: 1, explanation: 'Ø§ØªØ¬Ø§Ù‡Ø§Ù† Ù…ØªØ¹Ø§ÙƒØ³Ø§Ù† = ØªØ¨Ø§Ø·Ø¤' },
      
      // Problem Solving Questions (21-25)
      { id: 21, type: 'problem', question: 'Ø³ÙŠØ§Ø±Ø© ØªØªØ­Ø±Ùƒ Ø¨Ø³Ø±Ø¹Ø© 10 m/s Ø«Ù… ØªØ³Ø§Ø±Ø¹Øª Ø¨Ù…Ø¹Ø¯Ù„ 3 m/sÂ² Ù„Ù…Ø¯Ø© 4 Ø«ÙˆØ§Ù†Ù. Ø§Ø­Ø³Ø¨ Ø³Ø±Ø¹ØªÙ‡Ø§ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©.', options: ['22 m/s', '12 m/s', '40 m/s', '14 m/s'], answer: 0, solution: 'Ø§Ù„Ø­Ù„: v = vâ‚€ + at\nv = 10 + (3)(4)\nv = 10 + 12 = 22 m/s' },
      { id: 22, type: 'problem', question: 'Ø¬Ø³Ù… ÙŠØ³Ù‚Ø· Ù…Ù† Ø§Ø±ØªÙØ§Ø¹ 80 m. ÙƒÙ… ÙŠØ³ØªØºØ±Ù‚ Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø£Ø±Ø¶ØŸ (g = 10 m/sÂ²)', options: ['4 s', '8 s', '2 s', '16 s'], answer: 0, solution: 'Ø§Ù„Ø­Ù„: x = Â½gtÂ²\n80 = Â½(10)tÂ²\ntÂ² = 16\nt = 4 s' },
      { id: 23, type: 'problem', question: 'Ù‚Ø·Ø§Ø± ÙŠØªØ­Ø±Ùƒ Ø¨Ø³Ø±Ø¹Ø© 30 m/s Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙØ±Ø§Ù…Ù„ ÙˆØªÙˆÙ‚Ù Ø¨Ø¹Ø¯ Ù‚Ø·Ø¹ 90 m. Ø§Ø­Ø³Ø¨ ØªØ³Ø§Ø±Ø¹Ù‡.', options: ['-5 m/sÂ²', '-10 m/sÂ²', '5 m/sÂ²', '-3 m/sÂ²'], answer: 0, solution: 'Ø§Ù„Ø­Ù„: vÂ² = vâ‚€Â² + 2ax\n0 = 900 + 2a(90)\na = -900/180 = -5 m/sÂ²' },
      { id: 24, type: 'problem', question: 'ÙƒØ±Ø© Ù‚ÙØ°ÙØª Ù„Ù„Ø£Ø¹Ù„Ù‰ Ø¨Ø³Ø±Ø¹Ø© 20 m/s. ÙƒÙ… ØªØ³ØªØºØ±Ù‚ Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ø£Ù‚ØµÙ‰ Ø§Ø±ØªÙØ§Ø¹ØŸ (g = 10 m/sÂ²)', options: ['2 s', '4 s', '1 s', '0.5 s'], answer: 0, solution: 'Ø§Ù„Ø­Ù„: v = vâ‚€ - gt\n0 = 20 - 10t\nt = 2 s' },
      { id: 25, type: 'problem', question: 'Ø³ÙŠØ§Ø±Ø© Ù…Ù† Ø§Ù„Ø³ÙƒÙˆÙ† ØªØ³Ø§Ø±Ø¹Øª 4 m/sÂ² Ù„Ù…Ø¯Ø© 5 s. Ø§Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…Ù‚Ø·ÙˆØ¹Ø©.', options: ['50 m', '100 m', '20 m', '25 m'], answer: 0, solution: 'Ø§Ù„Ø­Ù„: x = vâ‚€t + Â½atÂ²\nx = 0 + Â½(4)(25)\nx = 50 m' }
    ];

    // State
    let currentStudent = '';
    let currentQuestion = 0;
    let userAnswers = new Array(25).fill(null);
    let studentsData = [];
    let deleteTargetId = null;
    let isSubmitting = false;

    const defaultConfig = {
      quiz_title: 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ - Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ù…ØªØ³Ø§Ø±Ø¹Ø©'
    };

    // Data Handler
    const dataHandler = {
      onDataChanged(data) {
        studentsData = data;
        if (document.getElementById('adminPanel').classList.contains('hidden') === false) {
          renderStudentsTable();
        }
      }
    };

    // Initialize
    async function init() {
      if (window.dataSdk) {
        await window.dataSdk.init(dataHandler);
      }
      
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (config) => {
            const title = config.quiz_title || defaultConfig.quiz_title;
            const mainTitle = document.getElementById('mainTitle');
            if (mainTitle) mainTitle.textContent = title;
          },
          mapToCapabilities: () => ({
            recolorables: [],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (config) => new Map([
            ['quiz_title', config.quiz_title || defaultConfig.quiz_title]
          ])
        });
      }
    }

    init();

    // Login Functions
    function handleLogin() {
      const name = document.getElementById('studentName').value.trim();
      const password = document.getElementById('studentPassword').value;
      const errorDiv = document.getElementById('loginError');
      
      if (!name) {
        errorDiv.textContent = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ';
        errorDiv.classList.remove('hidden');
        return;
      }
      
      if (password !== '2010') {
        errorDiv.textContent = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
        errorDiv.classList.remove('hidden');
        return;
      }
      
      currentStudent = name;
      errorDiv.classList.add('hidden');
      document.getElementById('loginPage').classList.add('hidden');
      document.getElementById('quizPage').classList.remove('hidden');
      document.getElementById('displayStudentName').textContent = name;
      currentQuestion = 0;
      userAnswers = new Array(25).fill(null);
      renderQuestion();
    }

    function showAdminLogin() {
      document.getElementById('loginPage').classList.add('hidden');
      document.getElementById('adminLoginPage').classList.remove('hidden');
    }

    function backToLogin() {
      document.getElementById('adminLoginPage').classList.add('hidden');
      document.getElementById('loginPage').classList.remove('hidden');
    }

    function handleAdminLogin() {
      const username = document.getElementById('adminUsername').value;
      const password = document.getElementById('adminPassword').value;
      const errorDiv = document.getElementById('adminLoginError');
      
      if (username === 'Hozan' && password === '2010') {
        errorDiv.classList.add('hidden');
        document.getElementById('adminLoginPage').classList.add('hidden');
        document.getElementById('adminPanel').classList.remove('hidden');
        renderStudentsTable();
      } else {
        errorDiv.textContent = 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
        errorDiv.classList.remove('hidden');
      }
    }

    function logoutAdmin() {
      document.getElementById('adminPanel').classList.add('hidden');
      document.getElementById('loginPage').classList.remove('hidden');
      document.getElementById('adminUsername').value = '';
      document.getElementById('adminPassword').value = '';
    }

    // Quiz Functions
    function renderQuestion() {
      const q = questions[currentQuestion];
      const typeLabels = { tf: 'ØµØ­ Ø£Ùˆ Ø®Ø·Ø£', mc: 'Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯', problem: 'Ù…Ø³Ø£Ù„Ø© Ø­Ø³Ø§Ø¨ÙŠØ©' };
      
      document.getElementById('questionType').textContent = typeLabels[q.type];
      document.getElementById('questionText').textContent = `${currentQuestion + 1}. ${q.question}`;
      document.getElementById('questionNumber').textContent = currentQuestion + 1;
      document.getElementById('progressBar').style.width = `${((currentQuestion + 1) / 25) * 100}%`;
      
      const container = document.getElementById('optionsContainer');
      container.innerHTML = '';
      
      if (q.type === 'tf') {
        const options = ['ØµØ­ âœ“', 'Ø®Ø·Ø£ âœ—'];
        options.forEach((opt, i) => {
          const btn = document.createElement('button');
          btn.className = `option-btn w-full text-right p-4 rounded-xl border border-white/20 ${userAnswers[currentQuestion] === (i === 0) ? 'selected' : ''}`;
          btn.textContent = opt;
          btn.onclick = () => selectAnswer(i === 0);
          container.appendChild(btn);
        });
      } else {
        q.options.forEach((opt, i) => {
          const btn = document.createElement('button');
          btn.className = `option-btn w-full text-right p-4 rounded-xl border border-white/20 ${userAnswers[currentQuestion] === i ? 'selected' : ''}`;
          btn.innerHTML = `<span class="inline-block w-8 h-8 rounded-full bg-white/10 text-center leading-8 ml-3">${['Ø£', 'Ø¨', 'Ø¬', 'Ø¯'][i]}</span>${opt}`;
          btn.onclick = () => selectAnswer(i);
          container.appendChild(btn);
        });
      }
      
      const solutionDiv = document.getElementById('problemSolution');
      if (q.type === 'problem') {
        document.getElementById('solutionText').textContent = q.solution;
        solutionDiv.classList.remove('hidden');
      } else {
        solutionDiv.classList.add('hidden');
      }
      
      // Update navigation
      document.getElementById('prevBtn').disabled = currentQuestion === 0;
      
      if (currentQuestion === 24) {
        document.getElementById('nextBtn').classList.add('hidden');
        document.getElementById('submitBtn').classList.remove('hidden');
      } else {
        document.getElementById('nextBtn').classList.remove('hidden');
        document.getElementById('submitBtn').classList.add('hidden');
      }
    }

    function selectAnswer(answer) {
      userAnswers[currentQuestion] = answer;
      renderQuestion();
    }

    function nextQuestion() {
      if (currentQuestion < 24) {
        currentQuestion++;
        renderQuestion();
      }
    }

    function prevQuestion() {
      if (currentQuestion > 0) {
        currentQuestion--;
        renderQuestion();
      }
    }

    async function submitQuiz() {
      if (isSubmitting) return;
      
      if (studentsData.length >= 999) {
        showToast('ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©', 'error');
        return;
      }
      
      isSubmitting = true;
      document.getElementById('submitBtn').disabled = true;
      document.getElementById('submitBtn').textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
      
      let score = 0;
      questions.forEach((q, i) => {
        if (q.type === 'tf') {
          if (userAnswers[i] === q.answer) score++;
        } else {
          if (userAnswers[i] === q.answer) score++;
        }
      });
      
      const percentage = Math.round((score / 25) * 100);
      
      if (window.dataSdk) {
        const result = await window.dataSdk.create({
          student_name: currentStudent,
          score: score,
          total_questions: 25,
          percentage: percentage,
          completed_at: new Date().toISOString()
        });
        
        if (!result.isOk) {
          showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø©', 'error');
        }
      }
      
      isSubmitting = false;
      document.getElementById('submitBtn').disabled = false;
      document.getElementById('submitBtn').textContent = 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª âœ“';
      
      showResults(score, percentage);
    }

    function showResults(score, percentage) {
      document.getElementById('quizPage').classList.add('hidden');
      document.getElementById('resultsPage').classList.remove('hidden');
      
      document.getElementById('resultStudentName').textContent = currentStudent;
      document.getElementById('scoreDisplay').textContent = `${score}/25`;
      document.getElementById('percentageDisplay').textContent = `${percentage}%`;
      
      const iconDiv = document.getElementById('resultIcon');
      const messageDiv = document.getElementById('resultMessage');
      
      if (percentage >= 90) {
        iconDiv.className = 'w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center text-5xl bg-gradient-to-br from-yellow-400 to-amber-500';
        iconDiv.textContent = 'ğŸ†';
        messageDiv.innerHTML = '<span class="text-yellow-400">Ù…Ù…ØªØ§Ø²!</span> Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹ ÙˆÙ…ØªÙ…ÙŠØ²';
      } else if (percentage >= 70) {
        iconDiv.className = 'w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center text-5xl bg-gradient-to-br from-green-400 to-emerald-500';
        iconDiv.textContent = 'â­';
        messageDiv.innerHTML = '<span class="text-green-400">Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹!</span> Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªÙ‚Ø¯Ù…';
      } else if (percentage >= 50) {
        iconDiv.className = 'w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center text-5xl bg-gradient-to-br from-blue-400 to-cyan-500';
        iconDiv.textContent = 'ğŸ“š';
        messageDiv.innerHTML = '<span class="text-blue-400">Ù…Ù‚Ø¨ÙˆÙ„</span> ØªØ­ØªØ§Ø¬ Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©';
      } else {
        iconDiv.className = 'w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center text-5xl bg-gradient-to-br from-red-400 to-rose-500';
        iconDiv.textContent = 'ğŸ“–';
        messageDiv.innerHTML = '<span class="text-red-400">ØªØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†</span> Ø±Ø§Ø¬Ø¹ Ø§Ù„ÙØµÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';
      }
    }

    function restartQuiz() {
      document.getElementById('resultsPage').classList.add('hidden');
      document.getElementById('loginPage').classList.remove('hidden');
      document.getElementById('studentName').value = '';
      document.getElementById('studentPassword').value = '';
      currentStudent = '';
      currentQuestion = 0;
      userAnswers = new Array(25).fill(null);
    }

    // Admin Functions
    function renderStudentsTable() {
      const tbody = document.getElementById('studentsBody');
      const noStudents = document.getElementById('noStudents');
      const totalSpan = document.getElementById('totalStudents');
      
      totalSpan.textContent = `${studentsData.length} Ø·Ø§Ù„Ø¨`;
      
      if (studentsData.length === 0) {
        tbody.innerHTML = '';
        noStudents.classList.remove('hidden');
        return;
      }
      
      noStudents.classList.add('hidden');
      
      const sortedData = [...studentsData].sort((a, b) => 
        new Date(b.completed_at) - new Date(a.completed_at)
      );
      
      tbody.innerHTML = sortedData.map((student, index) => {
        const date = new Date(student.completed_at);
        const dateStr = date.toLocaleDateString('ar-SA');
        const gradeClass = student.percentage >= 70 ? 'text-green-400' : student.percentage >= 50 ? 'text-yellow-400' : 'text-red-400';
        
        return `
          <tr class="border-b border-white/5 hover:bg-white/5 transition">
            <td class="py-3 px-4 text-gray-400">${index + 1}</td>
            <td class="py-3 px-4 font-medium">${student.student_name}</td>
            <td class="py-3 px-4">${student.score}/${student.total_questions}</td>
            <td class="py-3 px-4 ${gradeClass} font-bold">${student.percentage}%</td>
            <td class="py-3 px-4 text-gray-400 text-sm">${dateStr}</td>
            <td class="py-3 px-4">
              <button onclick="showDeleteConfirm('${student.__backendId}')" class="text-red-400 hover:text-red-300 transition text-sm">
                Ø­Ø°Ù
              </button>
            </td>
          </tr>
        `;
      }).join('');
    }

    function showDeleteConfirm(id) {
      deleteTargetId = id;
      document.getElementById('deleteModal').classList.remove('hidden');
    }

    function cancelDelete() {
      deleteTargetId = null;
      document.getElementById('deleteModal').classList.add('hidden');
    }

    async function confirmDelete() {
      if (!deleteTargetId || !window.dataSdk) return;
      
      const student = studentsData.find(s => s.__backendId === deleteTargetId);
      if (student) {
        const result = await window.dataSdk.delete(student);
        if (!result.isOk) {
          showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­Ø°Ù', 'error');
        }
      }
      
      deleteTargetId = null;
      document.getElementById('deleteModal').classList.add('hidden');
    }

    function showToast(message, type = 'info') {
      const toast = document.createElement('div');
      toast.className = `fixed bottom-4 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-xl ${type === 'error' ? 'bg-red-500' : 'bg-green-500'} text-white font-medium z-50 animate-fade`;
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9d477ac641cf2cff',t:'MTc3MjE5MzE4NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>